
local function isRare(fruitName)
    for _, v in pairs(_G.selectedFruitName or {}) do
        if string.lower(v) == string.lower(fruitName) then
            return true
        end
    end
    return false
end

-- Tạo luồng tự động spin
task.spawn(function()
    while _G.autoSpinToggle do
        local args = {"FruitsHandler", "Spin", {}}
        local result = game:GetService("ReplicatedStorage"):WaitForChild("Replicator"):InvokeServer(unpack(args))
        print("Kết quả spin:", result)

        if result and isRare(result) then
            print("🎯 Trái được chọn:", result, " => Dừng spin")
            _G.autoSpinToggle = false
            break
        else
            print("Tiếp tục spin...")
        end

        task.wait(3.5)
    end
end)
